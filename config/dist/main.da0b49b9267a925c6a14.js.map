{"version":3,"sources":["webpack:///./src/api/baseUrl.js","webpack:///./src/api/userApi.js","webpack:///./src/index.js","webpack:///./config/raven.config.js"],"names":["name","url","window","location","href","replace","results","RegExp","exec","decodeURIComponent","getQueryStringParameterByName","_baseUrl","__webpack_require__","Users","_classCallCheck","this","baseUrl","_baseUrl2","default","get","id","del","fetch","headers","Content-Type","Accept","then","onSuccess","onError","request","Request","method","messages","console","log","response","json","error","_raven","_ravenJs2","config","sentry_url","install","addPlugin","users","_userApi2","getUsers","result","usersBody","forEach","user","firstName","lastName","email","global","document","getElementById","innerHTML","deleteLinks","getElementsByClassName","Array","from","link","onclick","event","element","target","preventDefault","deleteUser","attributes","value","row","parentNode","removeChild","logException","ex","context","captureException","extra","_ravenJs"],"mappings":"oJAAe,WAMb,OAIF,SAAuCA,EAAMC,GACtCA,IAAKA,EAAMC,OAAOC,SAASC,MAChCJ,EAAOA,EAAKK,QAAQ,SAAU,QAC9B,IACIC,EADQ,IAAIC,OAAO,OAASP,EAAO,qBACnBQ,KAAKP,GACzB,OAAKK,EACAA,EAAQ,GACNG,mBAAmBH,EAAQ,GAAGD,QAAQ,MAAO,MAD5B,GADH,KATdK,CAA8B,cAAgB,yBAA2B,4XCElFC,EAAAC,EAAA,4CAEMC,aACJ,SAAAA,iGAAcC,CAAAC,KAAAF,GACZE,KAAKC,SAAU,EAAAC,EAAAC,wDAIf,OAAOH,KAAKI,IAAI,4CAGPC,GACT,OAAOL,KAAKM,IAAL,QAAiBD,+BAGtBnB,GAEF,OAAOqB,MAAMP,KAAKC,QAAUf,GAC1BsB,SACEC,eAAgB,mBAChBC,OAAU,sBAEXC,KAAKX,KAAKY,UAAWZ,KAAKa,qCAI3B3B,GACF,IAAM4B,EAAU,IAAIC,QAAQf,KAAKC,QAAUf,GACzC8B,OAAQ,WAGV,OAAOT,MAAMO,GAASH,KAAKX,KAAKY,UAAWZ,KAAKa,SAASF,KAAK,SAACM,GAAD,OAAcC,QAAQC,IAAR,GAAeF,uCAGnFG,GAER,OAAOA,EAASC,uCAGVC,GACNJ,QAAQC,IAAIG,sBAIDxB,gDCpDfD,EAAA,IAEA,QAAAA,EAAA,SAEAA,EAAA,IACA0B,EAAA1B,EAAA,sDAEA2B,EAAArB,QAAMsB,OAANF,EAAAG,YAAyBC,UAAUC,UAAU/B,EAAQ,IAErD,IAAMgC,EAAQ,IAAAC,EAAA3B,QAEd0B,EAAME,WAAWpB,KAAK,SAAAqB,GACpB,IAAIC,EAAY,GAChBD,EAAOE,QAAQ,SAAAC,GACbF,yCAC2BE,EAAK9B,GADhC,iDAEM8B,EAAK9B,GAFX,kBAGM8B,EAAKC,UAHX,kBAIMD,EAAKE,SAJX,kBAKMF,EAAKG,MALX,qBAQFC,EAAOC,SAASC,eAAe,SAASC,UAAYT,EAEpD,IAAMU,EAAcJ,EAAOC,SAASI,uBAAuB,cAK3DC,MAAMC,KAAKH,EAAa,SAAAI,GACtBA,EAAKC,QAAU,SAASC,GACtB,IAAMC,EAAUD,EAAME,OACtBF,EAAMG,iBACNvB,EAAMwB,WAAWH,EAAQI,WAAW,WAAWC,OAC/C,IAAMC,EAAMN,EAAQO,WAAWA,WAC/BD,EAAIC,WAAWC,YAAYF,oJC5BjBG,aAAT,SAAsBC,EAAIC,GAC/BrC,EAAArB,QAAM2D,iBAAiBF,GACrBG,MAAOF,IAGT1E,QAAUA,OAAO+B,SAAWA,QAAQI,OAASJ,QAAQI,MAAMsC,IAZ7D,MAAAI,EAAAnE,EAAA,uCAKa6B","file":"main.da0b49b9267a925c6a14.js","sourcesContent":["export default function getBaseUrl() {\r\n  /**\r\n   * http://localhost:3000/ is for dev environment : yarn start P.S if /?useMockApi=true return data json-server /users which is from port 3001\r\n   * for more info look at terminal when json server runs\r\n   * https://floating-basin-12302.herokuapp.com/ is for prod environment : yarn run build\r\n   */\r\n  return getQueryStringParameterByName('useMockApi') ? 'http://localhost:3001/' : 'https://floating-basin-12302.herokuapp.com/';\r\n}\r\n\r\n// NOTE: this will look at browser url\r\nfunction getQueryStringParameterByName(name, url) {\r\n  if (!url) url = window.location.href;\r\n  name = name.replace(/[[\\]]/g, \"\\\\$&\");\r\n  var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\r\n      results = regex.exec(url);\r\n  if (!results) return null;\r\n  if (!results[2]) return '';\r\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n}\r\n","/**\r\n * Centralized API Calls (1 Spot)\r\n *\r\n * -Configure all calls\r\n * -Handle pre-loader logic\r\n * -Handle errors\r\n */\r\n\r\nimport getBaseUrl from './baseUrl';\r\n\r\nclass Users {\r\n  constructor() {\r\n    this.baseUrl = getBaseUrl();\r\n  }\r\n\r\n  getUsers() {\r\n    return this.get('users'); // get baseUrl/users\r\n  }\r\n\r\n  deleteUser(id) {\r\n    return this.del(`user/${id}`);\r\n  }\r\n\r\n  get(url) {\r\n    // demo api https://floating-basin-12302.herokuapp.com/users\r\n    return fetch(this.baseUrl + url, {\r\n      headers : {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n       }\r\n    }).then(this.onSuccess, this.onError);\r\n  }\r\n\r\n  // Can't call func delete since reserved word.\r\n  del(url) {\r\n    const request = new Request(this.baseUrl + url, {\r\n      method: 'DELETE'\r\n    });\r\n\r\n    return fetch(request).then(this.onSuccess, this.onError).then((messages) => console.log(`${messages}`)); // eslint-disable-line no-console\r\n  }\r\n\r\n  onSuccess(response) {\r\n    // return response as json or response will return a ReadableStream\r\n    return response.json();\r\n  }\r\n\r\n  onError(error) {\r\n    console.log(error); // eslint-disable-line no-console\r\n  }\r\n}\r\n\r\nexport default Users;\r\n","import './styles/index.scss';\r\n// import { getUsers, deleteUser } from './api/userApi';\r\nimport Users from './api/userApi'\r\n\r\nimport Raven from 'raven-js';\r\nimport { sentry_url } from '../config/raven.config';\r\n\r\nRaven.config(sentry_url).install().addPlugin(require('raven-js/plugins/console'));\r\n\r\nconst users = new Users();\r\n\r\nusers.getUsers().then(result => {\r\n  let usersBody = '';\r\n  result.forEach(user => {\r\n    usersBody += `<tr>\r\n    <td><a href=\"#\" data-id=\"${user.id}\" class=\"deleteUser\">Delete</a></td>\r\n    <td>${user.id}</td>\r\n    <td>${user.firstName}</td>\r\n    <td>${user.lastName}</td>\r\n    <td>${user.email}</td>\r\n    </tr>`\r\n  });\r\n  global.document.getElementById('users').innerHTML = usersBody;\r\n\r\n  const deleteLinks = global.document.getElementsByClassName('deleteUser');\r\n\r\n  // Must use array.from to create a real array from a DOM collection\r\n  // Array.from will take second argument which is map function\r\n  // getElementsByClassName only returns an \"array-ish\" object\r\n  Array.from(deleteLinks, link => {\r\n    link.onclick = function(event) {\r\n      const element = event.target;\r\n      event.preventDefault();\r\n      users.deleteUser(element.attributes['data-id'].value);\r\n      const row = element.parentNode.parentNode;\r\n      row.parentNode.removeChild(row);\r\n    };\r\n  });\r\n});\r\n","import Raven from 'raven-js';\r\n\r\nconst sentry_key = '29fdcccc13fc41a8a78b53ac8f4e4c8b';\r\nconst sentry_app = '267363';\r\n\r\nexport const sentry_url = `https://${sentry_key}@sentry.io/${sentry_app}`;\r\n\r\nexport function logException(ex, context) {\r\n  Raven.captureException(ex, {\r\n    extra: context\r\n  });\r\n\r\n  window && window.console && console.error && console.error(ex); // eslint-disable-line no-console\r\n}\r\n"],"sourceRoot":""}